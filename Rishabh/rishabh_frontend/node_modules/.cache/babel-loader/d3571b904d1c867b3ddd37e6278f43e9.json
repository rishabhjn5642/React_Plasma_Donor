{"ast":null,"code":"import Promise from 'promise-polyfill';\nimport fetchPonyfill from 'fetch-ponyfill';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\n\nfunction btoa(string) {\n  string = String(string);\n  var bitmap,\n      a,\n      b,\n      c,\n      result = '',\n      i = 0,\n      rest = string.length % 3; // To determine the final padding\n\n  for (; i < string.length;) {\n    if ((a = string.charCodeAt(i++)) > 255 || (b = string.charCodeAt(i++)) > 255 || (c = string.charCodeAt(i++)) > 255) throw new TypeError(\"Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.\");\n    bitmap = a << 16 | b << 8 | c;\n    result += b64.charAt(bitmap >> 18 & 63) + b64.charAt(bitmap >> 12 & 63) + b64.charAt(bitmap >> 6 & 63) + b64.charAt(bitmap & 63);\n  } // If there's need of padding, replace the last 'A's with equal signs\n\n\n  return rest ? result.slice(0, rest - 3) + '==='.substring(rest) : result;\n}\n\nfunction atob(string) {\n  // atob can work with strings with whitespaces, even inside the encoded part,\n  // but only \\t, \\n, \\f, \\r and ' ', which can be stripped.\n  string = String(string).replace(/[\\t\\n\\f\\r ]+/g, '');\n  if (!b64re.test(string)) throw new TypeError(\"Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.\"); // Adding the padding if missing, for semplicity\n\n  string += '=='.slice(2 - (string.length & 3));\n  var bitmap,\n      result = '',\n      r1,\n      r2,\n      i = 0;\n\n  for (; i < string.length;) {\n    bitmap = b64.indexOf(string.charAt(i++)) << 18 | b64.indexOf(string.charAt(i++)) << 12 | (r1 = b64.indexOf(string.charAt(i++))) << 6 | (r2 = b64.indexOf(string.charAt(i++)));\n    result += r1 === 64 ? String.fromCharCode(bitmap >> 16 & 255) : r2 === 64 ? String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255) : String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255, bitmap & 255);\n  }\n\n  return result;\n}\n\nvar version = \"2.5.1\";\n/**\n * Base-64 encodes a (JSON-castable) object.\n *\n * @param obj - The object to encode.\n */\n\nvar encode64 = function encode64(obj) {\n  return btoa(JSON.stringify(obj));\n};\n/**\n * Appends a key-value pair to a target.\n *\n * @param target - An object or FormData instance to mutate.\n * @param key - The key to append.\n * @param value - The value to append.\n */\n\n\nvar append = function append(target, key, value) {\n  if (target instanceof FormData) {\n    target.append(key, value);\n  } else {\n    target[key] = value;\n  }\n};\n/**\n * Converts a snake case string to camel case.\n *\n * @param str - A string to convert to camel case.\n */\n\n\nvar toCamel = function toCamel(str) {\n  return str.replace(/([-_][a-z])/gi, function ($1) {\n    return $1.toUpperCase().replace('-', '').replace('_', '');\n  });\n};\n/**\n * Converts the top-level keys of an object to camel case.\n * This function returns a new object (instead of mutating in place).\n *\n * @param obj - An object with string keys.\n */\n\n\nvar camelizeTopKeys = function camelizeTopKeys(obj) {\n  var newObject = {};\n\n  for (var _i = 0, _Object$entries = Object.entries(obj); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        _key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    newObject[toCamel(_key)] = value;\n  }\n\n  return newObject;\n};\n/**\n * Generates a client header.\n *\n * @param givenLabel\n */\n\n\nvar clientHeader = function clientHeader(givenLabel) {\n  var label = \"@statickit/core@\".concat(version);\n  if (!givenLabel) return label;\n  return \"\".concat(givenLabel, \" \").concat(label);\n};\n/**\n * The current timestamp.\n */\n\n\nvar now = function now() {\n  // @ts-ignore\n  return 1 * new Date();\n};\n\nvar webdriver = function webdriver() {\n  return navigator.webdriver || !!document.documentElement.getAttribute(atob('d2ViZHJpdmVy')) || // @ts-ignore\n  !!window.callPhantom || // @ts-ignore\n  !!window._phantom;\n};\n\nvar Session = /*#__PURE__*/function () {\n  function Session() {\n    _classCallCheck(this, Session);\n\n    this.loadedAt = now();\n    this.webdriver = webdriver();\n  }\n\n  _createClass(Session, [{\n    key: \"teardown\",\n    value: function teardown() {}\n  }, {\n    key: \"data\",\n    value: function data() {\n      return {\n        loadedAt: this.loadedAt,\n        webdriver: this.webdriver\n      };\n    }\n  }]);\n\n  return Session;\n}();\n\nvar StaticKit = /*#__PURE__*/function () {\n  function StaticKit(config) {\n    _classCallCheck(this, StaticKit);\n\n    this.site = config.site;\n    if (typeof window !== 'undefined') this.startBrowserSession();\n  }\n  /**\n   * Starts a browser session.\n   */\n\n\n  _createClass(StaticKit, [{\n    key: \"startBrowserSession\",\n    value: function startBrowserSession() {\n      if (!this.session) {\n        this.session = new Session();\n      }\n    }\n    /**\n     * Teardown the client session.\n     */\n\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (this.session) this.session.teardown();\n    }\n    /**\n     * Submit a form.\n     *\n     * @param key - The form key.\n     * @param data - An object or FormData instance containing submission data.\n     * @param args - An object of form submission data.\n     */\n\n  }, {\n    key: \"submitForm\",\n    value: function submitForm(key, data) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var endpoint = opts.endpoint || 'https://api.statickit.com';\n      var fetchImpl = opts.fetchImpl || fetchPonyfill({\n        Promise: Promise\n      }).fetch;\n      var url = \"\".concat(endpoint, \"/j/sites/\").concat(this.site, \"/forms/\").concat(key, \"/submissions\");\n\n      var serializeBody = function serializeBody(data) {\n        if (data instanceof FormData) return data;\n        return JSON.stringify(data);\n      };\n\n      if (this.session) {\n        append(data, '_t', encode64(this.session.data()));\n      }\n\n      var headers = {\n        'StaticKit-Client': clientHeader(opts.clientName)\n      };\n\n      if (!(data instanceof FormData)) {\n        headers['Content-Type'] = 'application/json';\n      }\n\n      var request = {\n        method: 'POST',\n        mode: 'cors',\n        body: serializeBody(data),\n        headers: headers\n      };\n      return fetchImpl(url, request).then(function (response) {\n        return response.json().then(function (body) {\n          return {\n            body: body,\n            response: response\n          };\n        });\n      });\n    }\n    /**\n     * Invoke a function.\n     *\n     * @param name - The function name.\n     * @param args - An object of function arguments.\n     * @param opts - An object of options.\n     */\n\n  }, {\n    key: \"invokeFunction\",\n    value: function invokeFunction(name, args) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var endpoint = opts.endpoint || 'https://api.statickit.com';\n      var fetchImpl = opts.fetchImpl || fetchPonyfill({\n        Promise: Promise\n      }).fetch;\n      var url = \"\".concat(endpoint, \"/j/sites/\").concat(this.site, \"/functions/\").concat(name, \"/invoke\");\n      var headers = {\n        'StaticKit-Client': clientHeader(opts.clientName),\n        'Content-Type': 'application/json'\n      };\n      var session = this.session ? encode64(this.session.data()) : null;\n      var request = {\n        method: 'POST',\n        mode: 'cors',\n        body: JSON.stringify({\n          args: args,\n          session: session\n        }),\n        headers: headers\n      };\n      return fetchImpl(url, request).then(function (response) {\n        return response.json().then(function (body) {\n          return camelizeTopKeys(body);\n        });\n      });\n    }\n  }]);\n\n  return StaticKit;\n}();\n/**\n * Constructs the client object.\n */\n\n\nvar createClient = function createClient(config) {\n  return new StaticKit(config);\n};\n\nexport { StaticKit, createClient };","map":{"version":3,"sources":["/Users/teaxpresspvtltd/Downloads/Rishabh/rishabh_frontend/node_modules/@statickit/core/dist/statickit.esm.js"],"names":["Promise","fetchPonyfill","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","Symbol","iterator","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","b64","b64re","btoa","string","String","bitmap","a","b","c","result","rest","charCodeAt","charAt","slice","substring","atob","replace","test","r1","r2","indexOf","fromCharCode","version","encode64","obj","JSON","stringify","append","FormData","toCamel","str","$1","toUpperCase","camelizeTopKeys","newObject","_Object$entries","entries","_Object$entries$_i","_key","clientHeader","givenLabel","label","concat","now","Date","webdriver","navigator","document","documentElement","getAttribute","window","callPhantom","_phantom","Session","loadedAt","teardown","data","StaticKit","config","site","startBrowserSession","session","submitForm","opts","arguments","endpoint","fetchImpl","fetch","url","serializeBody","headers","clientName","request","method","mode","body","then","response","json","invokeFunction","name","args","createClient"],"mappings":"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","sourcesContent":["import Promise from 'promise-polyfill';\nimport fetchPonyfill from 'fetch-ponyfill';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nfunction btoa(string) {\n  string = String(string);\n  var bitmap,\n      a,\n      b,\n      c,\n      result = '',\n      i = 0,\n      rest = string.length % 3; // To determine the final padding\n\n  for (; i < string.length;) {\n    if ((a = string.charCodeAt(i++)) > 255 || (b = string.charCodeAt(i++)) > 255 || (c = string.charCodeAt(i++)) > 255) throw new TypeError(\"Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.\");\n    bitmap = a << 16 | b << 8 | c;\n    result += b64.charAt(bitmap >> 18 & 63) + b64.charAt(bitmap >> 12 & 63) + b64.charAt(bitmap >> 6 & 63) + b64.charAt(bitmap & 63);\n  } // If there's need of padding, replace the last 'A's with equal signs\n\n\n  return rest ? result.slice(0, rest - 3) + '==='.substring(rest) : result;\n}\nfunction atob(string) {\n  // atob can work with strings with whitespaces, even inside the encoded part,\n  // but only \\t, \\n, \\f, \\r and ' ', which can be stripped.\n  string = String(string).replace(/[\\t\\n\\f\\r ]+/g, '');\n  if (!b64re.test(string)) throw new TypeError(\"Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.\"); // Adding the padding if missing, for semplicity\n\n  string += '=='.slice(2 - (string.length & 3));\n  var bitmap,\n      result = '',\n      r1,\n      r2,\n      i = 0;\n\n  for (; i < string.length;) {\n    bitmap = b64.indexOf(string.charAt(i++)) << 18 | b64.indexOf(string.charAt(i++)) << 12 | (r1 = b64.indexOf(string.charAt(i++))) << 6 | (r2 = b64.indexOf(string.charAt(i++)));\n    result += r1 === 64 ? String.fromCharCode(bitmap >> 16 & 255) : r2 === 64 ? String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255) : String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255, bitmap & 255);\n  }\n\n  return result;\n}\n\nvar version = \"2.5.1\";\n\n/**\n * Base-64 encodes a (JSON-castable) object.\n *\n * @param obj - The object to encode.\n */\n\nvar encode64 = function encode64(obj) {\n  return btoa(JSON.stringify(obj));\n};\n/**\n * Appends a key-value pair to a target.\n *\n * @param target - An object or FormData instance to mutate.\n * @param key - The key to append.\n * @param value - The value to append.\n */\n\nvar append = function append(target, key, value) {\n  if (target instanceof FormData) {\n    target.append(key, value);\n  } else {\n    target[key] = value;\n  }\n};\n/**\n * Converts a snake case string to camel case.\n *\n * @param str - A string to convert to camel case.\n */\n\nvar toCamel = function toCamel(str) {\n  return str.replace(/([-_][a-z])/gi, function ($1) {\n    return $1.toUpperCase().replace('-', '').replace('_', '');\n  });\n};\n/**\n * Converts the top-level keys of an object to camel case.\n * This function returns a new object (instead of mutating in place).\n *\n * @param obj - An object with string keys.\n */\n\nvar camelizeTopKeys = function camelizeTopKeys(obj) {\n  var newObject = {};\n\n  for (var _i = 0, _Object$entries = Object.entries(obj); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        _key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    newObject[toCamel(_key)] = value;\n  }\n\n  return newObject;\n};\n/**\n * Generates a client header.\n *\n * @param givenLabel\n */\n\nvar clientHeader = function clientHeader(givenLabel) {\n  var label = \"@statickit/core@\".concat(version);\n  if (!givenLabel) return label;\n  return \"\".concat(givenLabel, \" \").concat(label);\n};\n/**\n * The current timestamp.\n */\n\nvar now = function now() {\n  // @ts-ignore\n  return 1 * new Date();\n};\n\nvar webdriver = function webdriver() {\n  return navigator.webdriver || !!document.documentElement.getAttribute(atob('d2ViZHJpdmVy')) || // @ts-ignore\n  !!window.callPhantom || // @ts-ignore\n  !!window._phantom;\n};\n\nvar Session =\n/*#__PURE__*/\nfunction () {\n  function Session() {\n    _classCallCheck(this, Session);\n\n    this.loadedAt = now();\n    this.webdriver = webdriver();\n  }\n\n  _createClass(Session, [{\n    key: \"teardown\",\n    value: function teardown() {}\n  }, {\n    key: \"data\",\n    value: function data() {\n      return {\n        loadedAt: this.loadedAt,\n        webdriver: this.webdriver\n      };\n    }\n  }]);\n\n  return Session;\n}();\n\nvar StaticKit =\n/*#__PURE__*/\nfunction () {\n  function StaticKit(config) {\n    _classCallCheck(this, StaticKit);\n\n    this.site = config.site;\n    if (typeof window !== 'undefined') this.startBrowserSession();\n  }\n  /**\n   * Starts a browser session.\n   */\n\n\n  _createClass(StaticKit, [{\n    key: \"startBrowserSession\",\n    value: function startBrowserSession() {\n      if (!this.session) {\n        this.session = new Session();\n      }\n    }\n    /**\n     * Teardown the client session.\n     */\n\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (this.session) this.session.teardown();\n    }\n    /**\n     * Submit a form.\n     *\n     * @param key - The form key.\n     * @param data - An object or FormData instance containing submission data.\n     * @param args - An object of form submission data.\n     */\n\n  }, {\n    key: \"submitForm\",\n    value: function submitForm(key, data) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var endpoint = opts.endpoint || 'https://api.statickit.com';\n      var fetchImpl = opts.fetchImpl || fetchPonyfill({\n        Promise: Promise\n      }).fetch;\n      var url = \"\".concat(endpoint, \"/j/sites/\").concat(this.site, \"/forms/\").concat(key, \"/submissions\");\n\n      var serializeBody = function serializeBody(data) {\n        if (data instanceof FormData) return data;\n        return JSON.stringify(data);\n      };\n\n      if (this.session) {\n        append(data, '_t', encode64(this.session.data()));\n      }\n\n      var headers = {\n        'StaticKit-Client': clientHeader(opts.clientName)\n      };\n\n      if (!(data instanceof FormData)) {\n        headers['Content-Type'] = 'application/json';\n      }\n\n      var request = {\n        method: 'POST',\n        mode: 'cors',\n        body: serializeBody(data),\n        headers: headers\n      };\n      return fetchImpl(url, request).then(function (response) {\n        return response.json().then(function (body) {\n          return {\n            body: body,\n            response: response\n          };\n        });\n      });\n    }\n    /**\n     * Invoke a function.\n     *\n     * @param name - The function name.\n     * @param args - An object of function arguments.\n     * @param opts - An object of options.\n     */\n\n  }, {\n    key: \"invokeFunction\",\n    value: function invokeFunction(name, args) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var endpoint = opts.endpoint || 'https://api.statickit.com';\n      var fetchImpl = opts.fetchImpl || fetchPonyfill({\n        Promise: Promise\n      }).fetch;\n      var url = \"\".concat(endpoint, \"/j/sites/\").concat(this.site, \"/functions/\").concat(name, \"/invoke\");\n      var headers = {\n        'StaticKit-Client': clientHeader(opts.clientName),\n        'Content-Type': 'application/json'\n      };\n      var session = this.session ? encode64(this.session.data()) : null;\n      var request = {\n        method: 'POST',\n        mode: 'cors',\n        body: JSON.stringify({\n          args: args,\n          session: session\n        }),\n        headers: headers\n      };\n      return fetchImpl(url, request).then(function (response) {\n        return response.json().then(function (body) {\n          return camelizeTopKeys(body);\n        });\n      });\n    }\n  }]);\n\n  return StaticKit;\n}();\n/**\n * Constructs the client object.\n */\n\nvar createClient = function createClient(config) {\n  return new StaticKit(config);\n};\n\nexport { StaticKit, createClient };\n"]},"metadata":{},"sourceType":"module"}