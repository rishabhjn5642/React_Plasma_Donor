{"ast":null,"code":"import React, { useState, useEffect, useContext } from 'react';\nimport { createClient } from '@statickit/core';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar StaticKitContext = React.createContext({\n  client: undefined\n});\nStaticKitContext.displayName = 'StaticKit';\n\nvar StaticKitProvider = function StaticKitProvider(props) {\n  if (!props.site) {\n    throw new Error('site is required');\n  }\n\n  var _useState = useState(function () {\n    return createClient({\n      site: props.site\n    });\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      client = _useState2[0];\n\n  useEffect(function () {\n    client.startBrowserSession();\n    return function () {\n      client.teardown();\n    };\n  }, []);\n  return React.createElement(StaticKitContext.Provider, {\n    value: {\n      client: client\n    }\n  }, props.children);\n};\n\nfunction useStaticKit() {\n  var _useContext = useContext(StaticKitContext),\n      client = _useContext.client;\n\n  return client;\n}\n\nvar version = \"2.1.1\";\n\nfunction useForm(formKey) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submitting = _useState2[0],\n      setSubmitting = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      succeeded = _useState4[0],\n      setSucceeded = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errors = _useState6[0],\n      setErrors = _useState6[1];\n\n  var globalClient = useStaticKit();\n  var client = args.client || globalClient;\n\n  if (!client) {\n    throw new Error('You must provide a StaticKit client');\n  }\n\n  if (!formKey) {\n    throw new Error('You must provide a form key (e.g. useForm(\"myForm\")');\n  }\n\n  var debug = !!args.debug;\n  var extraData = args.data;\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    var form = event.target;\n\n    if (form.tagName != 'FORM') {\n      throw new Error('submit was triggered for a non-form element');\n    }\n\n    var formData = new FormData(form); // Append extra data from config\n\n    if (_typeof(extraData) === 'object') {\n      for (var prop in extraData) {\n        if (typeof extraData[prop] === 'function') {\n          formData.append(prop, extraData[prop].call(null));\n        } else {\n          formData.append(prop, extraData[prop]);\n        }\n      }\n    }\n\n    setSubmitting(true);\n    return client.submitForm(formKey, formData, {\n      endpoint: args.endpoint,\n      clientName: \"@statickit/react@\".concat(version)\n    }).then(function (result) {\n      switch (result.response.status) {\n        case 200:\n          if (debug) console.log('Form submitted', result);\n          setSucceeded(true);\n          setErrors([]);\n          break;\n\n        case 422:\n          var body = result.body;\n          var _errors = body.errors;\n          if (debug) console.log('Validation error', result);\n          setSucceeded(false);\n          setErrors(_errors);\n          break;\n\n        default:\n          if (debug) console.log('Unexpected error', result);\n          setSucceeded(false);\n          break;\n      }\n\n      return result;\n    })[\"catch\"](function (error) {\n      if (debug) console.log('Unexpected error', error);\n      setSucceeded(false);\n      throw error;\n    })[\"finally\"](function () {\n      setSubmitting(false);\n    });\n  };\n\n  return [{\n    submitting: submitting,\n    succeeded: succeeded,\n    errors: errors\n  }, handleSubmit];\n}\n\nvar ValidationError = function ValidationError(props) {\n  var prefix = props.prefix,\n      field = props.field,\n      errors = props.errors,\n      attrs = _objectWithoutProperties(props, [\"prefix\", \"field\", \"errors\"]);\n\n  var error = (errors || []).find(function (error) {\n    return error.field == field;\n  });\n\n  if (!error) {\n    return null;\n  }\n\n  return React.createElement(\"div\", attrs, prefix, \" \", error.message);\n};\n\nexport { StaticKitProvider, ValidationError, useForm, useStaticKit };","map":{"version":3,"sources":["/Users/teaxpresspvtltd/Downloads/Rishabh/rishabh_frontend/node_modules/@statickit/react/dist/statickit-react.esm.js"],"names":["React","useState","useEffect","useContext","createClient","_typeof","obj","Symbol","iterator","constructor","prototype","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","call","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","TypeError","StaticKitContext","createContext","client","displayName","StaticKitProvider","props","site","Error","_useState","_useState2","startBrowserSession","teardown","createElement","Provider","children","useStaticKit","_useContext","version","useForm","formKey","args","arguments","submitting","setSubmitting","_useState3","_useState4","succeeded","setSucceeded","_useState5","_useState6","errors","setErrors","globalClient","debug","extraData","data","handleSubmit","event","preventDefault","form","tagName","formData","FormData","prop","append","submitForm","endpoint","clientName","concat","then","result","response","status","console","log","body","_errors","error","ValidationError","prefix","field","attrs","find","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { createClient } from '@statickit/core';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar StaticKitContext = React.createContext({\n  client: undefined\n});\nStaticKitContext.displayName = 'StaticKit';\nvar StaticKitProvider = function StaticKitProvider(props) {\n  if (!props.site) {\n    throw new Error('site is required');\n  }\n\n  var _useState = useState(function () {\n    return createClient({\n      site: props.site\n    });\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      client = _useState2[0];\n\n  useEffect(function () {\n    client.startBrowserSession();\n    return function () {\n      client.teardown();\n    };\n  }, []);\n  return React.createElement(StaticKitContext.Provider, {\n    value: {\n      client: client\n    }\n  }, props.children);\n};\nfunction useStaticKit() {\n  var _useContext = useContext(StaticKitContext),\n      client = _useContext.client;\n\n  return client;\n}\n\nvar version = \"2.1.1\";\n\nfunction useForm(formKey) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submitting = _useState2[0],\n      setSubmitting = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      succeeded = _useState4[0],\n      setSucceeded = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errors = _useState6[0],\n      setErrors = _useState6[1];\n\n  var globalClient = useStaticKit();\n  var client = args.client || globalClient;\n\n  if (!client) {\n    throw new Error('You must provide a StaticKit client');\n  }\n\n  if (!formKey) {\n    throw new Error('You must provide a form key (e.g. useForm(\"myForm\")');\n  }\n\n  var debug = !!args.debug;\n  var extraData = args.data;\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    var form = event.target;\n\n    if (form.tagName != 'FORM') {\n      throw new Error('submit was triggered for a non-form element');\n    }\n\n    var formData = new FormData(form); // Append extra data from config\n\n    if (_typeof(extraData) === 'object') {\n      for (var prop in extraData) {\n        if (typeof extraData[prop] === 'function') {\n          formData.append(prop, extraData[prop].call(null));\n        } else {\n          formData.append(prop, extraData[prop]);\n        }\n      }\n    }\n\n    setSubmitting(true);\n    return client.submitForm(formKey, formData, {\n      endpoint: args.endpoint,\n      clientName: \"@statickit/react@\".concat(version)\n    }).then(function (result) {\n      switch (result.response.status) {\n        case 200:\n          if (debug) console.log('Form submitted', result);\n          setSucceeded(true);\n          setErrors([]);\n          break;\n\n        case 422:\n          var body = result.body;\n          var _errors = body.errors;\n          if (debug) console.log('Validation error', result);\n          setSucceeded(false);\n          setErrors(_errors);\n          break;\n\n        default:\n          if (debug) console.log('Unexpected error', result);\n          setSucceeded(false);\n          break;\n      }\n\n      return result;\n    })[\"catch\"](function (error) {\n      if (debug) console.log('Unexpected error', error);\n      setSucceeded(false);\n      throw error;\n    })[\"finally\"](function () {\n      setSubmitting(false);\n    });\n  };\n\n  return [{\n    submitting: submitting,\n    succeeded: succeeded,\n    errors: errors\n  }, handleSubmit];\n}\n\nvar ValidationError = function ValidationError(props) {\n  var prefix = props.prefix,\n      field = props.field,\n      errors = props.errors,\n      attrs = _objectWithoutProperties(props, [\"prefix\", \"field\", \"errors\"]);\n\n  var error = (errors || []).find(function (error) {\n    return error.field == field;\n  });\n\n  if (!error) {\n    return null;\n  }\n\n  return React.createElement(\"div\", attrs, prefix, \" \", error.message);\n};\n\nexport { StaticKitProvider, ValidationError, useForm, useStaticKit };\n"]},"metadata":{},"sourceType":"module"}